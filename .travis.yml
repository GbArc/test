sudo: required
env:
  global:
  - MOZ_HEADLESS=1
language: python
dist: bionic
addons:
  chrome: stable
  firefox: latest
services:
- xvfb
before_install:
- if ! [ -f ./rxwt/webtestit ]; then wget --no-check-certificate --force-directories
  -O rxwt/webtestit https://www.ranorex.com/wp-json/sage/v2/webtestit/app-download/?platform=linuxAppImage;
  fi
- sudo apt-get install desktop-file-utils
- sudo apt-get install python3-venv -y
- sudo apt-get install python3-pip -y
- sudo apt-get install openjdk-11-jdk -y
- sudo apt-get install libsecret-1-0 -y
- chmod a+x ./rxwt/webtestit
install:
- python3 -m venv .
- pushd bin && which pip3 | xargs ln -s && popd
script: "./rxwt/webtestit run ."
cache:
  directories:
  - "$TRAVIS_BUILD_DIR/rxwt/"
